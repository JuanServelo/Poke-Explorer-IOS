////  PerfilView.swift//  PokéExplorer////  Created by user276508 on 14/06/25.//import SwiftUIimport SwiftDatastruct PerfilView: View {    @Environment(\.modelContext) var context    @Query var usuarios: [Usuario]    @Environment(\.dismiss) var dismiss    @State private var nome = ""    @State private var senha = ""    @State private var confirmacao = ""    @State private var mensagemErro = ""    var usuario: Usuario    var body: some View {        NavigationView {            Form {                Section(header: Text("Seus Dados")) {                    TextField("Nome", text: $nome)                        .autocapitalization(.none)                    SecureField("Nova Senha", text: $senha)                    SecureField("Confirmar Senha", text: $confirmacao)                }                if !mensagemErro.isEmpty {                    Text(mensagemErro)                        .foregroundColor(.red)                }                Section {                    Button("Salvar Alterações") {                        salvarEdicoes()                    }                }                Section {                    Button("Sair") {                        dismiss()                    }.foregroundColor(.red)                }            }            .navigationTitle("Perfil")            .onAppear {                nome = usuario.nomeDeUsuario            }        }    }    private func salvarEdicoes() {        guard senha == confirmacao else {            mensagemErro = "As senhas não coincidem."            return        }        if !senha.isEmpty && !Validador.senhaForte(senha) {            mensagemErro = "A senha deve ter pelo menos 6 caracteres, uma letra maiúscula e um número."            return        }        if nome.isEmpty {            mensagemErro = "O nome não pode estar vazio."            return        }        usuario.nomeDeUsuario = nome        if !senha.isEmpty {            usuario.senha = senha        }        do {            try context.save()            mensagemErro = "Dados salvos com sucesso"        } catch {            mensagemErro = "Erro ao salvar."        }    }}