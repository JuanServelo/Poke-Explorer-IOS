////  PokemonListView.swift//  PokéExplorer////  Created by user276508 on 14/06/25.//import SwiftUIimport SwiftDatastruct PokemonListView: View {    var usuarioLogado: Usuario    @Environment(\.modelContext) var context    @Query var favoritos: [Favorito]    @StateObject private var viewModel = PokemonListViewModel()    var body: some View {        NavigationView {            List(viewModel.pokemons) { pokemon in                HStack {                    Text(pokemon.name.capitalized)                    Spacer()                    Button(action: {                        toggleFavorito(pokemon)                    }) {                        Image(systemName: isFavorito(pokemon) ? "heart.fill" : "heart")                            .foregroundColor(.red)                    }                }            }            .onAppear {                viewModel.fetchPokemons()            }            .navigationTitle("Pokémons")        }    }    private func isFavorito(_ pokemon: Pokemon) -> Bool {        favoritos.contains(where: { $0.pokemonId == pokemon.id && $0.usuarioEmail == usuarioLogado.email })    }    private func toggleFavorito(_ pokemon: Pokemon) {        if let favoritoExistente = favoritos.first(where: { $0.pokemonId == pokemon.id && $0.usuarioEmail == usuarioLogado.email }) {            context.delete(favoritoExistente)        } else {            let novoFavorito = Favorito(pokemonId: pokemon.id, nome: pokemon.name, imagemURL: pokemon.imageURL, usuarioEmail: usuarioLogado.email)            context.insert(novoFavorito)        }        try? context.save()    }}