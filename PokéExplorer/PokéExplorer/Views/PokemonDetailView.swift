////  PokemonDetailView.swift//  PokéExplorer////  Created by user276508 on 15/06/25.//import SwiftUIimport SwiftDatastruct PokemonDetailView: View {    let pokemon: Pokemon    var usuario: Usuario    @Environment(\.modelContext) var context    @Query var favoritos: [Favorito]    var body: some View {        VStack(spacing: 16) {            AsyncImage(url: URL(string: pokemon.imageURL)) { image in                image.resizable()            } placeholder: {                ProgressView()            }            .frame(width: 150, height: 150)            Text(pokemon.name.capitalized)                .font(DesignTokens.Fonts.title)            Text("Altura: \(pokemon.height)")            Text("Peso: \(pokemon.weight)")            Text("Tipos: \(pokemon.types.map { $0.type.name }.joined(separator: ", "))")            Text("Habilidades: \(pokemon.abilities.map { $0.ability.name }.joined(separator: ", "))")            Button(action: {                withAnimation {                    toggleFavorito(pokemon)                }            }) {                HStack {                    Image(systemName: isFavorito(pokemon) ? "heart.fill" : "heart")                    Text(isFavorito(pokemon) ? "Remover dos Favoritos" : "Adicionar aos Favoritos")                }                .padding()                .background(DesignTokens.Colors.primary.opacity(0.2))                .cornerRadius(10)            }            Spacer()        }        .padding()        .navigationTitle("Detalhes")    }    private func isFavorito(_ pokemon: Pokemon) -> Bool {        favoritos.contains(where: { $0.pokemonId == pokemon.id && $0.usuarioEmail == usuario.email })    }    private func toggleFavorito(_ pokemon: Pokemon) {        if let favoritoExistente = favoritos.first(where: { $0.pokemonId == pokemon.id && $0.usuarioEmail == usuario.email }) {            context.delete(favoritoExistente)        } else {            let favorito = Favorito(pokemonId: pokemon.id, nome: pokemon.name, imagemURL: pokemon.imageURL, usuarioEmail: usuario.email)            context.insert(favorito)        }        try? context.save()    }}